function readSize(){var e=0,t=0;"number"==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight),DIMS.width=e,DIMS.height=t}function easing(e,t,n,i,s,o){if(e==t)return 0;s=isNaN(s)?1:s;var r=(t-e)/n;return o&&(r=t>e?Math.ceil(r):Math.floor(r)),Math.abs(r)<s?Math.abs(e-t)>s?t>e?s:-s:t-e:t>e?Math.min(r,i):Math.max(r,-i)}function addEvent(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function removeEvent(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}function ADD_EVENT_DISPACTHER(e){Object.extend(e,Event_Dispatcher)}function RESIZE_DIMS(e,t,n,i,s,o,r){var a=e,c=t,v=n,d=i,E=c,h=a;"VIEW_ALL"==s&&(E=d,h=a*d/c,h>v&&(E=c*v/a,h=v)),"FILL_ALL"==s&&(E=d,h=a*d/c,v>h&&(E=c*v/a,h=v)),0==r&&(h>a||E>c)&&(E=c,h=a),h=Math.round(h),E=Math.round(E);var l=-Math.round((h-v)/2),p=-Math.round((E-d)/2),u=o||"C";return"T"==u.slice(0,1)&&(p=0),"B"==u.slice(0,1)&&(p=d-E),("L"==u.slice(0,1)||"L"==u.slice(1,2))&&(l=0),("R"==u.slice(0,1)||"R"==u.slice(1,2))&&(l=v-h),{width:h,height:E,x:l,y:p}}Object.extend=function(e,t){for(var n in t)e[n]=t[n];return e},Event={},Event.CANCEL="cancel",Event.OPEN="open",Event.COMPLETE="onComplete",Event.CHANGE="onChange",Event.MOVE="MOVE",Event.START="START",Event.STOP="STOP",Event.RESIZE="resize",Event.SELECT="select",Event.RENDER="render",Event.REFRESH="refresh",Event.STATE_CHANGE="stateChange",Event.SOUND_COMPLETE="soundComplete",Event.FOCUS_OUT="focusOut",Event.FOCUS_IN="focusIn",Event.REMOVE="remove";var DIMS={},Event_Dispatcher={};Event_Dispatcher.addEventListener=function(e,t,n){this.events||(this.events={}),this.events[e]||(this.events[e]=new Array),this.events[e].push({listener:t,scope:n})},Event_Dispatcher.dispatchEvent=function(type,data){if(this.events||(this.events={}),this.events[type])for(var events=this.events[type],iEvent=0;iEvent<events.length;iEvent++){var listener=events[iEvent].listener,scope=events[iEvent].scope;if("function"==(typeof listener).toString())scope.eventRecieverFunction=listener,scope.eventRecieverFunction({currentTarget:this,type:type,data:data});else{var event={currentTarget:this,type:type,data:data};eval("scope."+listener+"(event)")}}},Event_Dispatcher.removeEventListener=function(e,t,n){if(!this.events)return!1;if(!this.events[e])return!1;for(var i=this.events[e],s=0;s<i.length;s++)t==i[s].listener&&n==i[s].scope&&i.splice(s,1)},Event_Dispatcher._addEventListener=Event_Dispatcher.addEventListener,Event_Dispatcher._dispatchEvent=Event_Dispatcher.dispatchEvent,Event_Dispatcher._removeEventListener=Event_Dispatcher.removeEventListener,ImageUploader=function(){this.fileInput=document.createElement("input"),this.fileInput.setAttribute("type","file"),this.fileInput.setAttribute("onchange","this.dragUploader.processFiles(this.files)"),this.fileInput.dragUploader=this,document.body.appendChild(this.fileInput),this.fileInput.style.position="fixed",this.fileInput.style.top="-300px",ADD_EVENT_DISPACTHER(this)},ImageUploader.prototype.browse=function(e){console.log(e),this.fileInput.click(e)},ImageUploader.prototype.imageReady=function(e){this.data=e,this.dispatchEvent(Event.COMPLETE)},ImageUploader.prototype.processFiles=function(e){if(console.log("file:",this.fileInput),f=e[0],console.log(e),f){console.log(f);var t=f.name,n=t.split(/\./).pop().toLowerCase();if(console.log("undefined"!=typeof FileReader,n,FileReader),("png"==n||"jpg"==n||"gif"==n||"jpeg"==n)&&"undefined"!=typeof FileReader){var i=new FileReader;i.uploader=this,i.onload=function(e){this.uploader.imageReady(e.target.result)},i.readAsDataURL(f)}}};
function TimeLine(t,i){this.duration=t,this.direction=1,this.position=0,this.status="STOP",this.startTime=0,this.interval=i,this.intervalObj,this.data={},this.events={},ADD_EVENT_DISPACTHER(this);var e=this;this.REQ_ANIMATION=function(){e.update()}}TimeLine.prototype.play=function(){if(1==this.direction&&this.position==this.duration||-1==this.direction&&0==this.position);else{if(this.startTime=(new Date).getTime()-this.position,"PLAY"!=this.status){var t=this,i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame;if(i)i(this.REQ_ANIMATION);else{var t=this;this.intervalObj=setInterval(function(){t.update()},this.interval)}}this.status="PLAY"}},TimeLine.prototype.pause=function(){this.status="PAUSE",clearInterval(this.intervalObj)},TimeLine.prototype.stop=function(){this.status="STOP",clearInterval(this.intervalObj)},TimeLine.prototype.position=function(t){this.position=t,this.startTime=(new Date).getTime()-this.position},TimeLine.prototype.update=function(){var t=(new Date).getTime();if(1==this.direction){if(this.position=t-this.startTime,this.position=Math.min(this.duration,this.position),this.position==this.duration)this.status="STOP",clearInterval(this.intervalObj),this.dispatchEvent(Event.COMPLETE),this.onComplete&&this.onComplete();else if("PLAY"==this.status){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame;i&&i(this.REQ_ANIMATION)}}else if(this.position=Math.max(2*this.position-(t-this.startTime),0),this.startTime=t-this.position,0==this.position)this.status="STOP",clearInterval(this.intervalObj),this.dispatchEvent(Event.COMPLETE),this.onComplete&&this.onComplete();else if("PLAY"==this.status){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame;i&&i(this.REQ_ANIMATION)}this.dispatchEvent(Event.CHANGE)},TimeLine.prototype.getTime=function(t,i,e){var n=Math.min(Math.max(this.position-t,0),i);return null!=e?e(n,0,1,i):this.easeInOut(n,0,1,i)},TimeLine.prototype.easeInOut=function(t,i,e,n){return-e/2*(Math.cos(Math.PI*t/n)-1)+i};var Scroll={};Scroll.end,Scroll.timeLine=new TimeLine(500,33),Scroll.timeLine.addEventListener(Event.CHANGE,"refresh",Scroll),Scroll.go=function(t,i){Scroll.start=i||document.body.scrollTop||document.documentElement.scrollTop,Scroll.end=t,Scroll.timeLine.duration=Math.min(Math.max(200,1.5*Math.abs(Scroll.end-Scroll.start)),1500),Scroll.timeLine.position=0,Scroll.timeLine.play()},Scroll.refresh=function(){var t=Scroll.start+(Scroll.end-Scroll.start)*Scroll.timeLine.getTime(0,Scroll.timeLine.duration);document.body.scrollTop=t,document.documentElement.scrollTop=t};
function JSON_Loader(){this.request,this.url,ADD_EVENT_DISPACTHER(this)}JSON_Loader.instances=new Array,JSON_Loader.prototype.load=function(a,b,c,d){JSON_Loader.instances.push(this),this.url=a,this.data=null;for(var e in c)this.url=this.url.replace("{"+e+"}",c[e]);if(this.request&&this.request.abort(),window.XMLHttpRequest)this.request=new XMLHttpRequest,this.request.overrideMimeType&&this.request.overrideMimeType("text/xml");else if(window.ActiveXObject)try{this.request=new ActiveXObject("Msxml2.XMLHTTP")}catch(f){try{this.request=new ActiveXObject("Microsoft.XMLHTTP")}catch(f){}}return this.request?(this.request.onreadystatechange=function(a){var b=a.target,c=b.readyState,d=!1;try{if(4==c&&(200==b.status||"file:"===window.location.protocol&&0==b.status))for(var e=0;e<JSON_Loader.instances.length;e++)if(JSON_Loader.instances[e].request==this){var f=JSON_Loader.instances[e];try{var g=unescape(escape(this.responseText).replace(/%0A/gim,"").replace(/%0D/gim,""));f.data=JSON.parse(g),d=f}catch(h){console.log("error:"+f.url+","+h),console.log("string:"+g),f.dispatchEvent(Event.CANCEL)}}}catch(h){console.log("error-->"+h)}d&&d.dispatchEvent(Event.COMPLETE)},b?(this.request.open("POST",this.url,!0),d&&this.request.setRequestHeader("Content-Type",d),this.request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.request.send(b)):(this.request.open("GET",this.url,!0),d&&this.request.setRequestHeader("Content-Type",d),this.request.send(null)),void 0):(alert("Giving up :( Cannot create an XMLHTTP instance"),!1)};
																																																																																																																																																																																																																																																																																																																																																																																									function addEventSimple(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)}function removeEventSimple(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i)}function getDrag(){return IS_TOUCH_DEVICE?new Touch:new DRAG}var el=document.createElement("div");el.setAttribute("ontouchstart","return;");var IS_TOUCH_DEVICE="function"==typeof el.ontouchstart;Touch=function(){this.startX=0,this.endY=0,ADD_EVENT_DISPACTHER(this);var t=this;this.touchMoveFN=function(e){t.move(e),e.preventDefault()},this.touchEndFN=function(e){t.end(e),e.preventDefault()}},Touch.prototype.start=function(t){return this.startTime=(new Date).getTime(),this.startX=t.touches?t.touches[0].pageX:t.clientX,this.startY=t.touches?t.touches[0].pageY:t.clientY,this.moveX=0,this.moveY=0,this.dispatchEvent(Event.START),this.HTML_DIV=null,t.preventDefault(),addEventSimple(document,"touchmove",this.touchMoveFN),addEventSimple(document,"touchend",this.touchEndFN),!1},Touch.prototype.startDrag=function(t,e,i){this.start(t),e&&(this.HTML_DIV=e,this.widthDiv=this.HTML_DIV.offsetWidth,this.heightDiv=this.HTML_DIV.offsetHeight,this.divX_Start=this.HTML_DIV.offsetLeft,this.divY_Start=this.HTML_DIV.offsetTop),i=i||{},this.leftLimit=i.left!=i.undefined?i.left:null,this.topLimit=i.top!=i.undefined?i.top:null,this.rightLimit=i.right!=i.undefined?i.right:null,this.bottomLimit=i.bottom!=i.undefined?i.bottom:null,this.moveFree=null==this.leftLimit&&null==this.topLimit&&null==this.rightLimit&&null==this.bottomLimit},Touch.prototype.move=function(t){if(this.time=(new Date).getTime()-this.startTime,this.endX=t.touches?t.touches[0].pageX:t.clientX,this.endY=t.touches?t.touches[0].pageY:t.clientY,this.moveX=this.endX-this.startX,this.moveY=this.endY-this.startY,this.HTML_DIV){var e=this.divX_Start+this.moveX,i=this.divY_Start+this.moveY;1!=this.moveFree?(null!=this.rightLimit&&null!=this.leftLimit&&(e=Math.min(e,this.rightLimit),e=Math.max(e,this.leftLimit),this.HTML_DIV.style.left=e+"px"),null!=this.bottomLimit&&null!=this.topLimit&&(i=Math.min(i,this.bottomLimit),i=Math.max(i,this.topLimit),this.HTML_DIV.style.top=i+"px")):(this.HTML_DIV.style.left=e+"px",this.HTML_DIV.style.top=i+"px")}var s=t.touches?t.touches[0].pageX:t.clientX,h=t.touches?t.touches[0].pageY:t.clientY;t={clientX:s,clientY:h},this.dispatchEvent(Event.MOVE,t)},Touch.prototype.end=function(t){this.time=(new Date).getTime()-this.startTime,removeEventSimple(document,"touchmove",this.touchMoveFN),removeEventSimple(document,"touchend",this.touchEndFN);var e=t.touches?t.touches[0].pageX:t.clientX,i=t.touches?t.touches[0].pageY:t.clientY;t={clientX:e,clientY:i},this.dispatchEvent(Event.STOP,t)},DRAG=function(){this.startX=0,this.endY=0,ADD_EVENT_DISPACTHER(this);var t=this;this.mouseMoveFN=function(e){t.move(e),e.preventDefault()},this.mouseDownFN=function(e){t.end(e),e.preventDefault()}},DRAG.prototype.start=function(t){this.startTime=(new Date).getTime();var e=t||window.event;return this.startX=e.clientX,this.startY=e.clientY,this.moveX=0,this.moveY=0,this.dispatchEvent(Event.START),this.HTML_DIV=null,t.preventDefault(),addEventSimple(document,"mousemove",this.mouseMoveFN),addEventSimple(document,"mouseup",this.mouseDownFN),!1},DRAG.prototype.startDrag=function(t,e,i){this.start(t),e&&(this.HTML_DIV=e,this.widthDiv=this.HTML_DIV.offsetWidth,this.heightDiv=this.HTML_DIV.offsetHeight,this.divX_Start=this.HTML_DIV.offsetLeft,this.divY_Start=this.HTML_DIV.offsetTop),i=i||{},this.leftLimit=i.left!=i.undefined?i.left:null,this.topLimit=i.top!=i.undefined?i.top:null,this.rightLimit=i.right!=i.undefined?i.right:null,this.bottomLimit=i.bottom!=i.undefined?i.bottom:null,this.moveFree=null==this.leftLimit&&null==this.topLimit&&null==this.rightLimit&&null==this.bottomLimit,document.getElementsByTagName("body")[0].style.userSelect="none",document.getElementsByTagName("body")[0].style.webkitUserSelect="none",document.getElementsByTagName("body")[0].style.MozUserSelect="none",document.getElementsByTagName("body")[0].setAttribute("unselectable","on")},DRAG.prototype.move=function(t){if(this.time=(new Date).getTime()-this.startTime,this.endX=t.touches?t.touches[0].pageX:t.clientX,this.endY=t.touches?t.touches[0].pageY:t.clientY,this.moveX=this.endX-this.startX,this.moveY=this.endY-this.startY,this.HTML_DIV){var e=this.divX_Start+this.moveX,i=this.divY_Start+this.moveY;1!=this.moveFree?(null!=this.rightLimit&&null!=this.leftLimit&&(e=Math.min(e,this.rightLimit),e=Math.max(e,this.leftLimit),this.HTML_DIV.style.left=e+"px"),null!=this.bottomLimit&&null!=this.topLimit&&(i=Math.min(i,this.bottomLimit),i=Math.max(i,this.topLimit),this.HTML_DIV.style.top=i+"px")):(this.HTML_DIV.style.left=e+"px",this.HTML_DIV.style.top=i+"px")}this.dispatchEvent(Event.MOVE,t)},DRAG.prototype.end=function(t){this.time=(new Date).getTime()-this.startTime,removeEventSimple(document,"mousemove",this.mouseMoveFN),removeEventSimple(document,"mouseup",this.mouseDownFN),this.dispatchEvent(Event.STOP,t),document.getElementsByTagName("body")[0].style.userSelect="",document.getElementsByTagName("body")[0].style.webkitUserSelect="",document.getElementsByTagName("body")[0].style.MozUserSelect="",document.getElementsByTagName("body")[0].setAttribute("unselectable","off")};